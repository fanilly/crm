<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>补卡申请</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <script src="./librarys/scripts/rem.js"></script>
    <link rel="stylesheet" type="text/css" href="./librarys/styles/common.css?v={:config('asset_version')}">
    <link rel="stylesheet" type="text/css" href="./librarys/jqweui/lib/weui.css?v={:config('asset_version')}">
    <link rel="stylesheet" type="text/css" href="./librarys/jqweui/css/jquery-weui.css?v={:config('asset_version')}">
    <link rel="stylesheet" type="text/css" href="./styles/public.css?v={:config('asset_version')}">
    <link rel="stylesheet" type="text/css" href="./styles/style.css?v={:config('asset_version')}">
    <link rel="stylesheet" type="text/css" href="./styles/xss.css?v={:config('asset_version')}">
    <link rel="stylesheet" type="text/css" href="./librarys/jquery-datepicker/styles/jquery.datepicker.rem.css?v={:config('asset_version')}">
</head>

<body>
    <style>
    body{ padding-bottom: 1.2rem; background-color: #f7f7f7; }
    </style>
    <div class="report-record-page">

        <div class="public-chosebar public-bottom-line">
            <div class="drops"><input id="mj_js_datepicker" readonly="readonly" value="2018年09月18日 星期四" style='background-image: none; width:auto; min-width: 2rem;'></div>
            <!-- <div class="turns">
                <div class="prev btn">上个月</div>
                <div class="next btn">下个月</div>
            </div> -->
        </div>


        <!--==============================
        =            calendar            =
        ===============================-->

        <div class="calendar-wapper public-datepicker-wapper">
            <div class="datepicker-week">
                <div class="datepicker-item">日</div>
                <div class="datepicker-item">一</div>
                <div class="datepicker-item">二</div>
                <div class="datepicker-item">三</div>
                <div class="datepicker-item">四</div>
                <div class="datepicker-item">五</div>
                <div class="datepicker-item">六</div>
            </div>
            <div class="datepicker-items">
                <div class="datepicker-item"></div>
                <div class="datepicker-item"></div>
                <div class="datepicker-item"></div>
                <div class="datepicker-item"></div>
                <div class="datepicker-item"></div>
                <div class="datepicker-item"></div>
                <div class="datepicker-item">1</div>
                <div class="datepicker-item">2</div>
                <div class="datepicker-item">3</div>
                <div class="datepicker-item">4</div>
                <div class="datepicker-item">5</div>
                <div class="datepicker-item">6</div>
                <div class="datepicker-item">7</div>
                <div class="datepicker-item">8</div>
                <div class="datepicker-item">9</div>
                <div class="datepicker-item datepicker-item-today">10</div>
                <div class="datepicker-item datepicker-item-yellow">11</div>
                <div class="datepicker-item datepicker-item-blue">12</div>
                <div class="datepicker-item datepicker-item-gray">13</div>
                <div class="datepicker-item">14</div>
                <div class="datepicker-item">15</div>
                <div class="datepicker-item">16</div>
                <div class="datepicker-item">17</div>
                <div class="datepicker-item">18</div>
                <div class="datepicker-item">19</div>
                <div class="datepicker-item">20</div>
                <div class="datepicker-item">21</div>
                <div class="datepicker-item">22</div>
                <div class="datepicker-item">23</div>
                <div class="datepicker-item">24</div>
                <div class="datepicker-item">25</div>
                <div class="datepicker-item">26</div>
                <div class="datepicker-item">27</div>
                <div class="datepicker-item">28</div>
                <div class="datepicker-item">29</div>
                <div class="datepicker-item active">30</div>
            </div>
        </div>
        <!--====  End of calendar  ====-->


        <div class="top_tips">先选择补卡的日期和时间，再申请补卡</div>
        <div class="record">
            <div class="item">
                <div class="set">上班时间09:00</div>
                <div class="info">
                    <div class="status">
                        <span>打卡时间08:55:22</span>
                        <i class="normal">正常</i>
                        <i class="later">迟到</i>
                    </div>
                    <div class="position">河南省郑州市金水区经八路街道教育厅家属院（经六路4号院南）</div>
                    <div class="links">
                        <span>申请补卡</span>
                        <span>更新打卡</span>
                        <span>查看备注</span>
                    </div>
                </div>
            </div>
            <div class="item">
                <div class="set">下班时间18:30</div>
                <div class="info">
                    <div class="status">
                        <span>下班未打卡</span>
                        <i class="later">缺卡</i>
                    </div>
                    <div class="links"><span onclick="window.location.href='./requestSupply.html'">申请补卡</span></div>
                </div>
            </div>
        </div>
    </div>


    <script src="./librarys/scripts/vue.js?v={:config('asset_version')}"></script>
    <script src="./librarys/jqweui/lib/jquery-2.1.4.js?v={:config('asset_version')}"></script>
    <script src="./librarys/jqweui/js/jquery-weui.min.js?v={:config('asset_version')}"></script>
    <script src="./scripts/public.js?v={:config('asset_version')}"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js?v={:config('asset_version')}"></script>
    <script src="./librarys/dayjs/dayjs.min.js"></script>
    <script src="./librarys/jquery-datepicker/scripts/jquery.datepicker.js?v={:config('asset_version')}"></script>
    <script>
        (function() {
            function getNowFormatDate() {
                var date = new Date();
                var seperator1 = "-";
                var year = date.getFullYear();
                var month = date.getMonth() + 1;
                var strDate = date.getDate();
                if (month >= 1 && month <= 9) { month = "0" + month }
                if (strDate >= 0 && strDate <= 9) { strDate = "0" + strDate }
                var currentdate = year + seperator1 + month + seperator1 + strDate + ' 10:00';
                $('#mj_start').val(currentdate)  
                $('#mj_end').val(currentdate)
                return currentdate;
            }
            getNowFormatDate()

            $('#mj_start').mjDatePicker({
                bg: 'linear-gradient(-45deg, #00aeff 0%, #47c5ff 100%), linear-gradient(#00aeff, #00aeff)',
                callback:function(year,month,day){
                    dealTime(year,month,day,1)
                },
                formate:'.'
            });
            $('#mj_end').mjDatePicker({
                bg: 'linear-gradient(-45deg, #00aeff 0%, #47c5ff 100%), linear-gradient(#00aeff, #00aeff)',
                callback:function(year,month,day){
                    dealTime(year,month,day,2)
                },
                formate:'.'
            });
            function dealTime(year,month,day,num){
                var month = month<10 ? '0'+month : month
                var day = day<10 ? '0'+day : day
                var val = year + '-' + month + '-' + day
                if(num==1){ $("#mj_start").val(val) }
                else if(num==2) { $("#mj_end").val(val) }
                
                var start = $('#mj_start').val()
                var end = $('#mj_end').val()
                if(start>end){
                    $('#mj_start').val(end)  
                    $('#mj_end').val(start)
                }
            }

            $.fn.autoHeight = function(){
                function autoHeight(elem){
                    elem.style.height = 'auto';
                    elem.scrollTop = 0; //防抖动
                    elem.style.height = elem.scrollHeight + 'px';
                }
                this.each(function(){
                    autoHeight(this);
                    $(this).on('keyup', function(){
                        autoHeight(this);
                    });
                });
            }
            $('textarea[autoHeight]').autoHeight();


            //选择交通工具
            $("#chose_type").picker({
                title: "请选择交通工具",
                cols: [{
                    textAlign: 'center',
                    values: ['步行','公交','开车','飞机']
                }],
                onClose: function (p, v, d) {
                    console.log(p.params.cols[0].activeIndex);
                }
            });

            //选择单程往返
            $("#chose_times").picker({
                title: "请选择",
                cols: [{
                    textAlign: 'center',
                    values: ['单程','往返']
                }],
                onClose: function (p, v, d) {
                    console.log(p.params.cols[0].activeIndex);
                }
            });


        })()
    </script>
</body>

</html>
